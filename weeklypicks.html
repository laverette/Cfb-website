<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Weekly Picks</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  <link rel="stylesheet" href="./Resources/Styles/weeklypicks.css">
</head>
<body>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Bouncing Football Background -->
  <div class="bouncing-football">
    <img src="https://cdn-icons-png.flaticon.com/512/1133/1133780.png" alt="American Football" style="width: 100%; height: 100%; object-fit: contain;">
  </div>
  
  <!-- Login Button - Upper Right -->
  <div style="position: fixed; top: 10px; right: 10px; z-index: 1000; display: none;">
    <div id="loginButtonSection">
      <a href="login.html" style="background-color: #3E2723; color: #F5F5F5; padding: 8px 16px; border-radius: 6px; text-decoration: none; border: 1px solid #8D6E63; font-weight: bold;">Login</a>
    </div>
    
    <div id="userSection" style="display: none; background-color: #2E2E2E; padding: 10px; border-radius: 8px; border: 1px solid #8D6E63; min-width: 200px;">
      <p style="color: #FFD700; margin: 0 0 8px 0; text-align: center; font-weight: bold;" id="userName"></p>
      <div style="text-align: center;">
        <button id="logoutBtn" style="background-color: #3E2723; color: #F5F5F5; border: 1px solid #8D6E63; padding: 5px 15px; border-radius: 4px; font-size: 12px;">Logout</button>
      </div>
    </div>
  </div>

  <!-- Tab Navigation -->
  <div class="tab-container">
    <div class="tab-header">
      <button class="tab-button active" onclick="openTab(event, 'week7-picks')">Week 8 Picks</button>
      <button class="tab-button" onclick="openTab(event, 'week6-results')">Week 7 Results</button>
    </div>
  </div>

  <!-- Week 7 Picks Tab -->
  <div id="week7-picks" class="tab-content active">
    <div class="title-section">
      <h1 class="title">Week 8 Picks</h1>
      <!-- Mobile Coach Corso Image (appears next to title) -->
      <div class="mobile-title-image">
        <img width="100%" height="auto" src="https://images.seattletimes.com/wp-content/uploads/2017/05/2459f782f2c946859a21920650fc2c75.jpg?d=2040x1253" alt="Image" class="img-fluid rounded shadow big-img" style="max-height: 300px; object-fit: cover;">
      </div>
    </div>
    
    <div class="week7-layout">
      <div class="form-section">
        <!-- Prediction Form -->
        <form name="predictions" method="POST" netlify>    
          <p>
            <label>Your Name: 
              <input id="yourname" name="user" type="text" required />
            </label>
          </p>
          
          <!-- Mobile Coach Corso Button (appears after name field, before Game 1) -->
          <div class="mobile-coach-corso">
            <div class="image-section">
              <img width="100%" height="auto" src="https://images.seattletimes.com/wp-content/uploads/2017/05/2459f782f2c946859a21920650fc2c75.jpg?d=2040x1253" alt="Image" class="img-fluid rounded shadow big-img" style="max-height: 300px; object-fit: cover;">
              <button type="button" class="coach-corso-btn" onclick="scrollToCoachCorso(event)">Need Help? Ask Coach Corso!</button>
            </div>
          </div>
          
          <!-- Rivalry Game Card -->
          <div class="rivalry-card">
            <div class="rivalry-header">
              <div class="rivalry-title">
                <img src="https://www.rockytopinsider.com/wp-content/uploads/2025/10/Screenshot-2025-10-13-at-10.35.27-AM.png" alt="Third Saturday in October Rivalry" class="rivalry-icon" style="width: 32px; height: 32px; object-fit: cover; border-radius: 4px;">
                <span class="rivalry-name" onclick="showAlabamaTennesseeRivalry()">The Third Saturday in October</span>
              </div>
              <div class="rivalry-teams">
                <div class="team-info">
                  <img src="https://a.espncdn.com/i/teamlogos/ncaa/500/2633.png" alt="Tennessee" class="rivalry-logo">
                  <span class="team-name">11 Tennessee</span>
                </div>
                <span class="vs">VS</span>
                <div class="team-info">
                  <img src="https://a.espncdn.com/i/teamlogos/ncaa/500/333.png" alt="Alabama" class="rivalry-logo">
                  <span class="team-name">6 Alabama</span>
                </div>
                <span class="betting-line">-7.5</span>
              </div>
            </div>
            <div class="game-controls">
              <select name="game1">
                <option value="BAMA">BAMA</option>
                <option value="TENN">TENN</option>
              </select>
            </div>
          </div>

          <p>
            <label><span class="games">Game 2:</span> 
              <img src="https://a.espncdn.com/i/teamlogos/ncaa/500/30.png" alt="USC" class="team-logo"> 20 USC at 
              <img src="https://a.espncdn.com/i/teamlogos/ncaa/500/87.png" alt="Notre Dame" class="team-logo"> 13 Notre Dame 
              <span class="betting-line">-8.5</span>
              <select name="game2">
                <option value="USC">USC</option>
                <option value="ND">ND</option>
              </select>
            </label>
          </p>

          <p>
            <label><span class="games">Game 3:</span> 
              <img src="https://a.espncdn.com/i/teamlogos/ncaa/500/145.png" alt="Ole Miss" class="team-logo"> 5 Ole Miss at 
              <img src="https://a.espncdn.com/i/teamlogos/ncaa/500/61.png" alt="Georgia" class="team-logo"> 9 Georgia
              <span class="betting-line">-7.5</span>
              <select name="game3">
                <option value="OLE">OLE</option>
                <option value="UGA">UGA</option>
              </select>
            </label>
          </p>

          <p>
            <label><span class="games">Game 4:</span> 
              <img src="https://a.espncdn.com/i/teamlogos/ncaa/500/245.png" alt="Texas A&M" class="team-logo"> 4 Texas A&M at 
              <img src="https://a.espncdn.com/i/teamlogos/ncaa/500/8.png" alt="Arkansas" class="team-logo"> Arkansas
              <span class="betting-line">+7.5</span>
              <select name="game4">
                <option value="TEXA&M">TEXA&M</option>
                <option value="ARK">ARK</option>
              </select>
            </label>
          </p>

          <p>
            <label><span class="games">Game 5:</span> 
              <img src="https://a.espncdn.com/i/teamlogos/ncaa/500/201.png" alt="Oklahoma" class="team-logo"> 14 Oklahoma at 
              <img src="https://a.espncdn.com/i/teamlogos/ncaa/500/2579.png" alt="South Carolina" class="team-logo"> South Carolina
              <span class="betting-line">+5.5</span>
              <select name="game5">
                <option value="OKLA">OKLA</option>
                <option value="SC">SC</option>
              </select>
            </label>
          </p>

          <p>
            <label><span class="games">Game 6:</span> 
              <img src="https://a.espncdn.com/i/teamlogos/ncaa/500/99.png" alt="LSU" class="team-logo"> 10 LSU at 
              <img src="https://a.espncdn.com/i/teamlogos/ncaa/500/238.png" alt="Vanderbilt" class="team-logo"> 17 Vanderbilt
              <span class="betting-line">-2.5</span>
              <select name="game6">
                <option value="LSU">LSU</option>
                <option value="VANDY">VANDY</option>
              </select>
            </label>
          </p>

          <p>
          <label><span class="games">Game 7:</span> 
              <img src="https://a.espncdn.com/i/teamlogos/ncaa/500/59.png" alt="Georgia Tech" class="team-logo"> 12 Georgia Tech at 
              <img src="https://a.espncdn.com/i/teamlogos/ncaa/500/150.png" alt="Duke" class="team-logo"> Duke
              <span class="betting-line">-1.5</span>
              <select name="game7">
                <option value="GT">GT</option>
                <option value="DUKE">DUKE</option>
              </select>
            </label>
          </p>

          <p>
            <label><span class="games">Game 8:</span> 
              <img src="https://a.espncdn.com/i/teamlogos/ncaa/500/2641.png" alt="Texas Tech" class="team-logo"> 7 Texas Tech at 
              <img src="https://a.espncdn.com/i/teamlogos/ncaa/500/9.png" alt="Arizona State" class="team-logo"> Arizona State
              <span class="betting-line">+9.5</span>
              <select name="game8">
                <option value="TTU">TTU</option>
                <option value="AZST">AZST</option>
              </select>
            </label>
          </p>

          <p>
            <label><span class="games">Game 9:</span> 
              <img src="https://a.espncdn.com/i/teamlogos/ncaa/500/251.png" alt="Texas" class="team-logo"> 21 Texas at 
              <img src="https://a.espncdn.com/i/teamlogos/ncaa/500/96.png" alt="Kentucky" class="team-logo"> Kentucky
              <span class="betting-line">+12.5</span>
              <select name="game9">
                <option value="TEX">TEX</option>
                <option value="UK">UK</option>
              </select>
            </label>
          </p>

          <p>
            <label><span class="games">Game 10:</span> 
              <img src="https://a.espncdn.com/i/teamlogos/ncaa/500/264.png" alt="Washington" class="team-logo"> Washington at 
              <img src="https://a.espncdn.com/i/teamlogos/ncaa/500/130.png" alt="Michigan" class="team-logo"> Michigan
              <span class="betting-line">-6.5</span>
              <select name="game10">
                <option value="WASH">WASH</option>
                <option value="MICH">MICH</option>
              </select>
            </label>
          </p>

          <p>
            <label><span class="games">Game 11:</span> 
              <img src="https://a.espncdn.com/i/teamlogos/ncaa/500/213.png" alt="Penn State" class="team-logo"> Penn State at 
              <img src="https://a.espncdn.com/i/teamlogos/ncaa/500/2294.png" alt="Iowa" class="team-logo"> Iowa
              <span class="betting-line">-2.5</span>
              <select name="game11">
                <option value="PSU">PSU</option>
                <option value="IOWA">IOWA</option>
              </select>
            </label>
          </p>

          <!-- Rivalry Game Card -->
          <div class="rivalry-card">
            <div class="rivalry-header">
              <div class="rivalry-title">
                <span class="rivalry-icon">⚔️</span>
                <span class="rivalry-name" onclick="showRivalryHistory()">The Holy War</span>
                <span class="rivalry-icon">⚔️</span>
              </div>
              <div class="rivalry-teams">
                <div class="team-info">
                  <img src="https://a.espncdn.com/i/teamlogos/ncaa/500/254.png" alt="Utah" class="rivalry-logo">
                  <span class="team-name">23 Utah</span>
                </div>
                <span class="vs">VS</span>
                <div class="team-info">
                  <img src="https://a.espncdn.com/i/teamlogos/ncaa/500/252.png" alt="BYU" class="rivalry-logo">
                  <span class="team-name">15 BYU</span>
                </div>
                <span class="betting-line">+3.5</span>
              </div>
            </div>
            <div class="game-controls">
              <select name="game12">
                <option value="UTAH">UTAH</option>
                <option value="BYU">BYU</option>
              </select>
            </div>
          </div>

          <p>
            <button id="submit" type="submit">Submit Predictions</button>
            <a href="prediction-history.html" style="background-color: #3E2723; color: #F5F5F5; padding: 6px 10px; border-radius: 6px; text-decoration: none; border: 1px solid #8D6E63; display: inline-block; font-weight: bold; font-size: 14px; margin-left: 10px; margin-right: 10px;">View Individual History</a>
            <a href="index.html" style="background-color: #3E2723; color: #F5F5F5; padding: 6px 10px; border-radius: 6px; text-decoration: none; border: 1px solid #8D6E63; display: inline-block; font-weight: bold; font-size: 14px; margin-left: 10px; margin-right: 10px;">Back to Main Site</a> 
            
          </p>
        </form>
        <div id="results"></div>
      </div>
      
      <div class="image-section">
        <img width="100%" height="auto" src="https://images.seattletimes.com/wp-content/uploads/2017/05/2459f782f2c946859a21920650fc2c75.jpg?d=2040x1253" alt="Image" class="img-fluid rounded shadow big-img" style="max-height: 300px; object-fit: cover;">
        <button type="button" class="coach-corso-btn" onclick="scrollToCoachCorso(event)">Need Help? Ask Coach Corso!</button>
      </div>
    </div>
    
    <!-- Coach Corso Says Section -->
    <div id="coach-corso-section" class="coach-corso-container">
      <h2 class="coach-corso-title">🏈 Coach Corso Says...</h2>
      <div class="coach-corso-content">
          <div class="corso-tip">
            <span class="tip-icon">🐘</span>
            <span class="tip-text">Tennessee's pass defense is struggling, it's gonna be a long day for the Vols. Give Me Bama!</span>
          </div>
          <div class="corso-tip">
            <span class="tip-icon">🐓</span>
            <span class="tip-text">South Carolina has had a rough start to the season, but they have one of the most talented teams in the country. Gamecocks pull the upset!</span>
          </div>
          <div class="corso-tip">
            <span class="tip-icon">⚔️</span>
            <span class="tip-text">The Holy War is upon us! Never bet against the Mormons! BYU!</span>
          </div>
          <div class="corso-tip">
            <span class="tip-icon">🔴</span>
            <span class="tip-text">Texas Tech is undefeated and primed for a playoff spot! Give me the Red Raiders!</span>
          </div>
          <div class="corso-tip">
            <span class="tip-icon">🐗</span>
            <span class="tip-text">Texas A&M is on a roll! In the lead for the SEC! Undefeated! That ends today when they visit the hogs in Fayetteville!</span>
          </div>
           <div class="corso-tip">
             <span class="tip-icon">🦁</span>
             <span class="tip-text">Penn State may have fired their Coach and their QB go down with a career ending injury, but their backup QB is a future star! Lions by a touchdown!</span>
           </div>
      </div>
    </div>
  </div>

  <!-- Week 6 Results Tab -->
  <div id="week6-results" class="tab-content">
    <h1 class="title">Week 7 Results</h1>
    
    <div class="leaderboards-container">
      <div class="Leaderboard last-week">
        <h3 class="leaderboard-title">🏆 Last Week</h3>
        <ol class="leaderboard-list">
          <li class="leaderboard-list-item">Blake 10-2 <span class="percentage">83%</span><span class="ranking-change up">▲ 4</span></li>
          <li class="leaderboard-list-item">Gracie 9-3 <span class="percentage">75%</span><span class="ranking-change up">▲ 1</span></li>
          <li class="leaderboard-list-item">Katelyn 9-3 <span class="percentage">75%</span><span class="ranking-change up">▲ 1</span></li>
          <li class="leaderboard-list-item">Michaela 7-5 <span class="percentage">58%</span><span class="ranking-change down">▼ 2</span></li>
          <li class="leaderboard-list-item">Allie 7-5 <span class="percentage">58%</span><span class="ranking-change down">▼ 1</span></li>
          <li class="leaderboard-list-item">Logan 7-5 <span class="percentage">58%</span><span class="ranking-change down">▼ 5</span></li>
        </ol>
      </div>
      <div class="Leaderboard all-time">
        <h3 class="leaderboard-title">🏆 All Time</h3>
        <ol class="leaderboard-list">
          <li class="leaderboard-list-item">Michaela 46-14 <span class="percentage">76.67%</span><span class="ranking-change none">—</span></li>
          <li class="leaderboard-list-item">Blake 52-20 <span class="percentage">72.22%</span><span class="ranking-change none">—</span></li>
          <li class="leaderboard-list-item">Gracie 50-22 <span class="percentage">69.44%</span><span class="ranking-change none">—</span></li>
          <li class="leaderboard-list-item">Katelyn 41-19 <span class="percentage">68.33%</span><span class="ranking-change none">—</span></li>
          <li class="leaderboard-list-item">Logan 47-25 <span class="percentage">65.28%</span><span class="ranking-change none">—</span></li>
          <li class="leaderboard-list-item">Allie 15-9 <span class="percentage">62.5%</span><span class="ranking-change none">—</span></li>
          <li class="leaderboard-list-item">Chase 15-9 <span class="percentage">62.5%</span><span class="ranking-change none">—</span></li>
        </ol>
      </div>
    </div>

    <!-- WEEK 6 Analysis Section -->
    <div class="analysis-container">
      <h3 class="analysis-title">📊 WEEK 7 Analysis</h3>
      <div class="analysis-content">
        <div class="analysis-stats">
          <div class="stat-highlight">
            <span class="stat-icon">🎯</span>
            <span class="stat-text">Gracie is the only user to correctly pick Indiana to beat Oregon</span>
          </div>
          <div class="stat-highlight">
            <span class="stat-icon">🔥</span>
            <span class="stat-text">100% consensus on Alabama Beating Missouri</span>
          </div>
          <div class="stat-highlight">
            <span class="stat-icon">🏆</span>
            <span class="stat-text">Michaela's Fall: Is the Dynasty over after her 7-5 week?</span>
          </div>
          <div class="stat-highlight">
            <span class="stat-icon">📈</span>
            <span class="stat-text">All users combined this week went 49-23 (68.06%). Down 5.74% from last week.</span>
          </div>
          <div class="stat-highlight">
            <span class="stat-icon">❌</span>
            <span class="stat-text">I didn't even bother putting Penn State in this week (Again) because I thought they had an easy win. (Wrong(Again))</span>
          </div>
          <div class="stat-highlight">
            <span class="stat-icon">🎯</span>
            <span class="stat-text">Katelyn is the only user to correctly pick Pittsburgh to beat Florida State</span>
          </div>
        </div>
        
        <div class="analysis-insights">
          <h4 class="insights-title">🔑 Keys for Next Week</h4>
          <ul class="insights-list">
            <li>Alabama is favored against Tennessee by 4 points more than they were against Missouri last week</li>
            <li>The Holy War Between UTAH and BYU is this week</li>
            <li>17 Vanderbilt opens the week Favored against 10 LSU</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  



    <script>
    // Login/Logout functionality
    let currentUser = null;

    // Check if user is logged in on page load
    document.addEventListener('DOMContentLoaded', function() {
      const savedUser = localStorage.getItem('currentUser');
      if (savedUser) {
        currentUser = JSON.parse(savedUser);
        showUserSection();
        // Name field is now user-editable
      } else {
        showLoginButton();
      }
    });

    // Logout handler
    document.getElementById('logoutBtn').addEventListener('click', function() {
      currentUser = null;
      localStorage.removeItem('currentUser');
      showLoginButton();
      // Name field remains user-editable
    });

    function showUserSection() {
      document.getElementById('loginButtonSection').style.display = 'none';
      document.getElementById('userSection').style.display = 'block';
      document.getElementById('userName').textContent = currentUser.username;
    }

    function showLoginButton() {
      document.getElementById('loginButtonSection').style.display = 'block';
      document.getElementById('userSection').style.display = 'none';
    }

    // Prediction form handler
    document.querySelector('form[name="predictions"]').addEventListener('submit', function(e) {
      e.preventDefault();

      // No login required for Netlify Forms

      const form = e.target;
      const formData = new FormData(form);
     
      // Build preview
      const user = formData.get("user");
      let html = `
        <div class="prediction-results-container">
          <div class="prediction-header">
            <h2 class="prediction-title">🏆 ${user}'s Week 7 Predictions</h2>
          </div>
          <div class="predictions-grid">
      `;
      
      for (let i = 1; i <= 12; i++) {
        const gameData = [
          "11 Tennessee at 6 Alabama",
          "20 USC at 13 Notre Dame",
          "5 Ole Miss at 9 Georgia",
          "4 Texas A&M at Arkansas",
          "14 Oklahoma at South Carolina",
          "10 LSU at 17 Vanderbilt",
          "12 Georgia Tech at Duke",
          "7 Texas Tech at Arizona State",
          "21 Texas at Kentucky",
          "Washington at Michigan",
          "Penn State at Iowa",
          "23 Utah at 15 BYU"
        ];
        
        const prediction = formData.get("game" + i);
        
        html += `
          <div class="prediction-card">
            <div class="game-info">
              <span class="game-number">Game ${i}</span>
              <span class="game-matchup">${gameData[i-1]}</span>
            </div>
            <div class="prediction-result">
              <span class="prediction-choice ${prediction.toLowerCase()}">${prediction}</span>
            </div>
          </div>
        `;
      }
      
      html += `
          </div>
          <div class="prediction-summary">
          <div class="summary-stats">
            <div class="stat-item">
              <span class="stat-number">12</span>
              <span class="stat-label">Total Picks</span>
            </div>
            <div class="stat-item">
              <span class="stat-number">-</span>
              <span class="stat-label">Correct</span>
            </div>
            <div class="stat-item">
              <span class="stat-number">-</span>
              <span class="stat-label">Accuracy</span>
            </div>
          </div>
            <div class="prediction-footer">
              <p class="success-message">✅ Predictions submitted successfully!</p>
              <p class="next-steps">Check back after the games to see how you did!</p>
              <div class="screenshot-section">
                <button id="screenshotBtn" class="screenshot-button">
                  📸 Save to Photos
                </button>
                <p class="screenshot-note">Save your predictions to your camera roll!</p>
              </div>
            </div>
          </div>
        </div>
      `;
      
      document.getElementById("results").innerHTML = html;

      // Add screenshot functionality
      document.getElementById('screenshotBtn').addEventListener('click', function() {
        takeScreenshot();
      });

      // Submit to Netlify Forms
      fetch("/", {
        method: "POST",
        headers: { "Content-Type": "application/x-www-form-urlencoded" },
        body: new URLSearchParams({
          "form-name": "predictions",
          ...Object.fromEntries(formData)
        }).toString()
      })
      .then(() => {
        // Scroll after fetch completes
        setTimeout(() => {
          document.getElementById("results").scrollIntoView({ 
            behavior: 'smooth',
            block: 'start'
          });
        }, 100); // slight delay for smoother experience
      })
      .catch(err => console.error(err));
    });

    // Screenshot functionality
    function takeScreenshot() {
      const resultsContainer = document.getElementById('results');
      
      // Check if html2canvas is available (we'll add it via CDN)
      if (typeof html2canvas === 'undefined') {
        // Load html2canvas library
        const script = document.createElement('script');
        script.src = 'https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js';
        script.onload = function() {
          captureScreenshot();
        };
        document.head.appendChild(script);
      } else {
        captureScreenshot();
      }
    }

    function captureScreenshot() {
      const resultsContainer = document.getElementById('results');
      
      // Create a temporary container with only the content we want to screenshot
      const tempContainer = document.createElement('div');
      tempContainer.style.position = 'absolute';
      tempContainer.style.left = '-9999px';
      tempContainer.style.top = '-9999px';
      tempContainer.style.width = resultsContainer.offsetWidth + 'px';
      tempContainer.style.backgroundColor = '#1E1E1E';
      tempContainer.style.padding = '2rem';
      tempContainer.style.borderRadius = '15px';
      tempContainer.style.border = '2px solid #FFD700';
      
      // Clone the content we want (exclude success messages and screenshot button)
      const predictionContainer = resultsContainer.querySelector('.prediction-results-container');
      if (predictionContainer) {
        const clone = predictionContainer.cloneNode(true);
        
        // Remove the prediction footer (success messages and screenshot button)
        const footer = clone.querySelector('.prediction-footer');
        if (footer) {
          footer.remove();
        }
        
        tempContainer.appendChild(clone);
        document.body.appendChild(tempContainer);
      }
      
      html2canvas(tempContainer, {
        backgroundColor: '#1E1E1E',
        scale: 2, // Higher quality
        useCORS: true,
        allowTaint: true,
        scrollX: 0,
        scrollY: 0,
        width: tempContainer.scrollWidth,
        height: tempContainer.scrollHeight
      }).then(canvas => {
        // Check if Web Share API is supported (mobile)
        if (navigator.share && navigator.canShare) {
          canvas.toBlob(function(blob) {
            const file = new File([blob], `week7-predictions-${new Date().toISOString().split('T')[0]}.png`, { 
              type: 'image/png' 
            });
            
            // Use Web Share API for mobile
            if (navigator.canShare({ files: [file] })) {
              navigator.share({
                files: [file],
                title: 'My Week 7 Predictions',
                text: 'Check out my college football predictions!'
              }).then(() => {
                showSuccessMessage('Shared! Check your share options to save to photos.');
              }).catch((error) => {
                console.log('Share failed:', error);
                fallbackDownload(canvas);
              });
            } else {
              fallbackDownload(canvas);
            }
          });
        } else {
          // Fallback for desktop or unsupported browsers
          fallbackDownload(canvas);
        }
      }).catch(err => {
        console.error('Screenshot failed:', err);
        alert('Screenshot failed. Please try again.');
      }).finally(() => {
        // Clean up temporary container
        if (tempContainer && tempContainer.parentNode) {
          tempContainer.parentNode.removeChild(tempContainer);
        }
      });
    }

    function fallbackDownload(canvas) {
      // Create download link for desktop/fallback
      const link = document.createElement('a');
      link.download = `week7-predictions-${new Date().toISOString().split('T')[0]}.png`;
      link.href = canvas.toDataURL();
      
      // Trigger download
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
      
      showSuccessMessage('Downloaded! Check your Downloads folder.');
    }

    function showSuccessMessage(message) {
      const btn = document.getElementById('screenshotBtn');
      const originalText = btn.innerHTML;
      btn.innerHTML = '✅ ' + message;
      btn.style.backgroundColor = '#4CAF50';
      
      setTimeout(() => {
        btn.innerHTML = originalText;
        btn.style.backgroundColor = '';
      }, 3000);
    }

    // Tab functionality
    function openTab(evt, tabName) {
      var i, tabcontent, tablinks;
      
      // Hide all tab content
      tabcontent = document.getElementsByClassName("tab-content");
      for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].classList.remove("active");
      }
      
      // Remove active class from all tab buttons
      tablinks = document.getElementsByClassName("tab-button");
      for (i = 0; i < tablinks.length; i++) {
        tablinks[i].classList.remove("active");
      }
      
      // Show the selected tab content and mark the button as active
      document.getElementById(tabName).classList.add("active");
      evt.currentTarget.classList.add("active");
    }

    // Coach Corso scroll functionality
    function scrollToCoachCorso(event) {
      if (event) {
        event.preventDefault();
        event.stopPropagation();
      }
      document.getElementById('coach-corso-section').scrollIntoView({ 
        behavior: 'smooth',
        block: 'start'
      });
    }

    // Rivalry History Modal
    function showRivalryHistory() {
      const modal = document.createElement('div');
      modal.className = 'rivalry-modal';
      modal.innerHTML = `
        <div class="rivalry-modal-content">
          <div class="rivalry-modal-header">
            <h3>⚔️ The Holy War</h3>
            <span class="close-modal" onclick="closeRivalryModal()">&times;</span>
          </div>
          <div class="rivalry-modal-body">
            <p><strong>Utah vs BYU</strong> - One of college football's most intense rivalries!</p>
            <p><strong>History:</strong> Dating back to 1896, this rivalry represents more than just football - it's a battle between the University of Utah (public, Heathens) and Brigham Young University (private, LDS-affiliated).</p>
            <p><strong>Notable Moments:</strong></p>
            <ul>
              <li>2004: Utah's perfect season with Urban Meyer</li>
              <li>2008: BYU's 48-24 victory in Provo</li>
              <li>2015: Utah's 35-28 thriller in Las Vegas Bowl</li>
            </ul>
            <p><strong>Series Record:</strong> Utah leads 62-31-4</p>
            <p><strong>Why "Holy War":</strong> The nickname reflects the religious and cultural differences between the two institutions, making every game a battle for state supremacy.</p>
          </div>
        </div>
      `;
      document.body.appendChild(modal);
    }

    function closeRivalryModal() {
      const modal = document.querySelector('.rivalry-modal');
      if (modal) {
        modal.remove();
      }
    }

    // Alabama vs Tennessee Rivalry Modal
    function showAlabamaTennesseeRivalry() {
      const modal = document.createElement('div');
      modal.className = 'rivalry-modal';
      modal.innerHTML = `
        <div class="rivalry-modal-content">
          <div class="rivalry-modal-header">
            <h3><img src="https://www.rockytopinsider.com/wp-content/uploads/2025/10/Screenshot-2025-10-13-at-10.35.27-AM.png" alt="Third Saturday in October" style="width: 24px; height: 24px; object-fit: cover; border-radius: 4px; vertical-align: middle; margin-right: 8px;"> The 3rd Saturday in October</h3>
            <span class="close-modal" onclick="closeRivalryModal()">&times;</span>
          </div>
          <div class="rivalry-modal-body">
            <p><strong>Alabama vs Tennessee</strong> - One of the SEC's most storied rivalries!</p>
            <p><strong>History:</strong> Dating back to 1901, this rivalry is traditionally played on the third Saturday in October. It's a battle between two of the SEC's most successful programs.</p>
            <p><strong>Famous Moments:</strong></p>
            <ul>
              <li><strong>The Famous Interview:</strong> "I hate Tennessee! I hate their orange! I hate their garbage truck colors! I hate everything about them!" - A legendary Alabama fan's passionate rant that became internet famous</li>
              <li><strong>Cigar Tradition:</strong> The winning teams players and fans celebrate victories by smoking cigars, a tradition that started in the 1950s with athletic trainer Jim Goostree</li>
              <li>2022: Tennessee's thrilling 52-49 victory, ending Alabama's 15-game winning streak</li>
              <li>2024: Tennessee's 24-17 victory - UT has won 2 of the last 3 meetings</li>
            </ul>
            <p><strong>Series Record:</strong> Alabama leads 59-40-7</p>
            <p><strong>Why "Third Saturday in October":</strong> The game was traditionally scheduled for the third Saturday in October, though modern scheduling has sometimes moved it. The rivalry represents the deep-seated animosity between two proud football programs.</p>
            <p><strong>Fun Fact:</strong> The cigar tradition began in the 1950s when Alabama's athletic trainer Jim Goostree started handing out cigars after victories over Tennessee!</p>
          </div>
        </div>
      `;
      document.body.appendChild(modal);
    }

</script>
</body>
</html>
